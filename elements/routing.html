<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<script src="../bower_components/page/page.js"></script>
<script>

	var _showRoute = function (routeName) {
		window.deleteGlobal();
		var r = document.querySelectorAll('.route');
		for (var i = 0; i < r.length; ++i) {
			var classL = r[i].classList;
			if (r[i].id === routeName) {
				classL.remove('hide');
				classL.add('show');
			} else {
				classL.add('hide');
				classL.remove('show');
			}
		};
	};

  window.addEventListener('WebComponentsReady', function() {

    // We use Page.js for routing. This is a Micro
    // client-side router inspired by the Express router
    // More info: https://visionmedia.github.io/page.js/

    page('/', function (cxt) {
			_showRoute('main');
			// window.showToastFromRedirect(cxt.querystring);
    });

    page('/book/:code', function (cxt) {
			_showRoute('book-detail');
			window.showToastFromRedirect(cxt.querystring);
    });

		page('/profile/:user', function () {
			_showRoute('profile');
    });

		page('/readmore/:code', function () {
			_showRoute('readmore');
    });

		page('/library/:code', function (cxt) {
			_showRoute('library');
			window.showToastFromRedirect(cxt.querystring);
    });

		page('/loan/:code', function (cxt) {
			_showRoute('loan');
			window.showToastFromRedirect(cxt.querystring);
		});

		page('/lista/:code', function (cxt) {
			_showRoute('lista-detail');
			window.showToastFromRedirect(cxt.querystring);
    });

		page('/new/lista', function () {
			_showRoute('lista-creation');
    });

		page('/edit/lista', function () {
			_showRoute('lista-edit');
    });

		page('/new/lista/books', function () {
			_showRoute('lista-creation-books');
    });

		page('/edit/lista/books', function () {
			_showRoute('lista-edit-books');
    });

		page('/new/loan', function () {
			_showRoute('loan-creation');
    });

		page('/new/book', function () {
			_showRoute('book-creation');
		});

		page('/edit/loan', function () {
			_showRoute('loan-edit');
    });

		page('/new/loan/books', function () {
			_showRoute('loan-creation-books');
    });

		page('/new/library', function () {
			_showRoute('library-creation');
    });

		page('/edit/library', function () {
			_showRoute('library-edit');
    });

		page('/new/library/books', function () {
			_showRoute('library-creation-books');
    });

		page('/edit/library/books', function () {
			_showRoute('library-edit-books');
    });

		page('/search', function () {
			_showRoute('search');
    });

    // add #! before urls
    page({
      hashbang: true
    });

  });
</script>
